<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>FIBA 3x3 Rules — 200 MCQ Trainer</title>
<style>
  :root{
    --bg:#0f1115; --card:#151923; --ink:#e9edf1; --muted:#9aa3ad; --accent:#36c; --good:#24c174; --bad:#e14d5c;
  }
  html,body{height:100%}
  body{margin:0;background:linear-gradient(180deg,#0e1219,#0b0e14);color:var(--ink);font:16px/1.5 system-ui,Segoe UI,Roboto,Arial,sans-serif}
  .wrap{max-width:1100px;margin:0 auto;padding:24px}
  header{display:flex;gap:16px;align-items:center;margin-bottom:16px}
  header img{height:44px;opacity:.95}
  h1{font-weight:800;font-size:clamp(20px,2.2vw,28px);letter-spacing:.2px;margin:.2rem 0}
  .card{background:var(--card);border:1px solid rgba(255,255,255,.08);box-shadow:0 10px 30px rgba(0,0,0,.25);border-radius:16px;overflow:hidden}
  .bar{height:6px;background:#2a2f3a}
  .bar>i{display:block;height:100%;width:0;background:linear-gradient(90deg,#36c,#6ae,#88f);transition:width .4s ease}
  .pane{display:grid;grid-template-columns:1fr;gap:0}
  .q-body{padding:18px 20px 6px 20px}
  .q-meta{display:flex;justify-content:space-between;color:var(--muted);font-size:.92rem;margin-bottom:8px}
  .q-text{font-size:1.12rem;margin:6px 0 12px 0}
  .q-img{display:block;max-width:360px;max-height:360px;border-radius:12px;border:1px solid rgba(255,255,255,.08);background:#0c0f15;margin:8px 0}
  .opts{display:grid;gap:10px;padding:0 20px 16px 20px}
  .opt{display:flex;gap:10px;align-items:flex-start;background:#10141d;border:1px solid rgba(255,255,255,.09);padding:12px 12px;border-radius:12px;cursor:pointer;transition:.18s}
  .opt input{margin-top:2px}
  .opt:hover{transform:translateY(-1px);border-color:#3a4050}
  .opt[aria-disabled="true"]{opacity:.75;cursor:not-allowed}
  .footer{display:flex;gap:10px;align-items:center;padding:14px 16px;background:#121722;border-top:1px solid rgba(255,255,255,.08)}
  button{border:0;border-radius:12px;padding:11px 16px;font-weight:700;cursor:pointer}
  .ghost{color:var(--ink);background:#1a2130;border:1px solid rgba(255,255,255,.1)}
  .next{background:var(--accent);color:#fff}
  .submit{background:#0ea5e9;color:#fff}
  .hidden{display:none !important}
  .pill{display:inline-flex;align-items:center;gap:8px;background:#18202d;border:1px solid #233047;color:#bcd0ea;border-radius:100px;padding:.2rem .6rem;font-size:.8rem}
  .grid-2{display:grid;grid-template-columns:1fr 1fr;gap:18px}
  .result{padding:22px}
  .score{font-size:1.6rem;font-weight:800;margin:0 0 10px 0}
  .explain{color:var(--muted);font-size:.95rem}
  .key{margin-top:14px;border-top:1px dashed rgba(255,255,255,.14);padding-top:14px;max-height:420px;overflow:auto}
  .key details{background:#0f1420;border:1px solid rgba(255,255,255,.08);border-radius:12px;margin:8px 0}
  .key summary{cursor:pointer;padding:10px 12px}
  .ans{padding:10px 12px;border-top:1px dashed rgba(255,255,255,.1);display:grid;gap:8px}
  .good{color:var(--good)} .bad{color:var(--bad)}
  .muted{color:var(--muted)}
  .small{font-size:.85rem}
  .copyright{color:#7e8b98;margin-top:18px;font-size:.82rem}
  .tag{font-size:.7rem;text-transform:uppercase;letter-spacing:.08em;background:#1b2331;border:1px solid rgba(255,255,255,.08);padding:.15rem .5rem;border-radius:999px}
  .ctr{display:flex;justify-content:center}
</style>
</head>
<body>
<div class="wrap">
  <header>
    <img alt="FIBA 3x3" src="https://upload.wikimedia.org/wikipedia/commons/4/47/FIBA_3x3_logo.svg"/>
    <div>
      <h1>FIBA 3x3 Rules — Interactive MCQ Practice</h1>
      <div class="muted small">50 random questions per run • One-at-a-time • Includes referee-signal image items • Based on the FIBA 3x3 Rules</div>
    </div>
  </header>

  <div class="card" id="quiz">
    <div class="bar"><i id="progress"></i></div>
    <div class="pane">
      <div class="q-body">
        <div class="q-meta">
          <div id="qcount" class="pill">Question 1 / 50</div>
          <div class="pill"><span id="category">General</span></div>
        </div>
        <div id="qtext" class="q-text">Loading…</div>
        <img id="qimg" class="q-img hidden" alt="Question image"/>
      </div>
      <div id="options" class="opts"></div>
      <div class="footer">
        <button id="skip" class="ghost">Skip</button>
        <button id="next" class="next">Next</button>
        <button id="submit" class="submit hidden">Submit</button>
        <div style="margin-left:auto" class="muted small">Your selection is saved automatically.</div>
      </div>
    </div>
  </div>

  <div id="results" class="card hidden">
    <div class="result">
      <p class="score" id="scoreline">Score: — / 50</p>
      <p class="explain">Review your answers below. Green shows the correct answer for each question; red marks your selection when it was incorrect.</p>
      <div class="key" id="answerKey"></div>
      <div class="copyright">This trainer is for study use. It is not affiliated with FIBA.</div>
    </div>
  </div>
</div>

<script>
/* ========= Utility ========= */
const shuffle = a => { for (let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]]}return a; };
const sample = (a,n) => shuffle(a.slice()).slice(0,n);

/* ========= Image Signal Bank (filenames should be placed in same folder as this HTML) ========= */
const SIGNALS = [
  // 1–10 (general mechanics) + 11–20 + 31–56 (fouls / violations / admin)
  {file:"1. Stop the clock.jpeg", label:"Stop the clock / Foul"},
  {file:"2. Stop the clock for foul.jpeg", label:"Stop the clock for foul"},
  {file:"3. 1 Point.jpeg", label:"Count the goal: 1 point"},
  {file:"4. 2 points.jpeg", label:"Count the goal: 2 points"},
  {file:"5. Charged time-out.jpeg", label:"Charged time-out"},
  {file:"6. TV time-out.jpeg", label:"TV time-out"},
  {file:"7. Cancel score, cancel play.jpeg", label:"Cancel score / cancel play"},
  {file:"8. Visible count.jpeg", label:"Visible count / 5s"},
  {file:"9. Communication.jpeg", label:"Communication (to table/partner)"},
  {file:"10. Shot clock reset.jpeg", label:"Shot clock reset"},
  {file:"11. Out-of-bounds.jpeg", label:"Out-of-bounds"},
  {file:"12. Held ball:jump ball situation.jpeg", label:"Held ball / jump ball situation"},
  {file:"13. Travelling.jpeg", label:"Travelling"},
  {file:"14. Illegal Dribble_Double dribbling.jpeg", label:"Illegal dribble / double dribble"},
  {file:"15. Illegal dribble_Carrying the ball.jpeg", label:"Carrying the ball"},
  {file:"16. 3 seconds.jpeg", label:"3 seconds"},
  {file:"17. 5 seconds.jpeg", label:"5 seconds"},
  {file:"18. 12 seconds.jpeg", label:"12-second shot clock"},
  {file:"19. Deliberate kick or block of the ball.jpeg", label:"Deliberate kick or block of the ball"},
  {file:"20. Ball not cleared.jpeg", label:"Ball not cleared"},
  {file:"31. Holding.jpeg", label:"Holding"},
  {file:"32. Blocking (defense)_Illegal screen (offense).jpeg", label:"Blocking (DF) / Illegal screen (OF)"},
  {file:"33. Pushing or charging without the ball.jpeg", label:"Pushing / charging without the ball"},
  {file:"34. Handchecking.jpeg", label:"Handchecking"},
  {file:"35. Illegal use of hands.jpeg", label:"Illegal use of hands"},
  {file:"36. Charging with the ball.jpeg", label:"Charging with the ball"},
  {file:"37. Illegal contact to the hand.jpeg", label:"Illegal contact to the hand"},
  {file:"38. Hooking.jpeg", label:"Hooking"},
  {file:"39. Excessive swinging of the elbow.jpeg", label:"Excessive swinging of the elbow"},
  {file:"40. Hit to the head.jpeg", label:"Hit to the head"},
  {file:"41. Foul by team in control of the ball.jpeg", label:"Team-control foul (offense)"},
  {file:"42. Foul on the act of shooting.jpeg", label:"Foul on the act of shooting"},
  {file:"43. Foul not on the act of shooting.jpeg", label:"Foul not on the act of shooting"},
  {file:"44. Double foul.jpeg", label:"Double foul"},
  {file:"45. Technical foul.jpeg", label:"Technical foul"},
  {file:"46. Unsportsmanlike foul.jpeg", label:"Unsportsmanlike foul"},
  {file:"47. Disqualifying foul.jpeg", label:"Disqualifying foul"},
  {file:"48. Fake a foul.jpeg", label:"Faking a foul"},
  {file:"49. IRS review.jpeg", label:"Instant Replay review"},
  {file:"50. Challenge.jpeg", label:"Coach challenge (3x3)"},
  {file:"51. After foul without free throw(s).jpeg", label:"Resume: foul without free throws"},
  {file:"52. After foul by team in control of the ball.jpeg", label:"Resume: team-control foul"},
  {file:"53. 1 free throw.jpeg", label:"Signal: 1 free throw"},
  {file:"54. 2 free throws.jpeg", label:"Signal: 2 free throws"},
  {file:"55. 1 free throw.jpeg", label:"1 free throw (again)"},
  {file:"56. 2 free throws.jpeg", label:"2 free throws (again)"}
];

/* ========= Text Question Builders =========
   We generate many items programmatically from concise fact tables to keep the HTML compact.
*/
const FACTS = {
  scoring: [
    {q:"How many points is a field goal from inside the arc worth in 3x3?", ok:"1", bad:["2","3","It depends"]},
    {q:"A field goal from behind the arc in 3x3 counts for…", ok:"2 points", bad:["3 points","1 point","Advantage + free throw"]},
    {q:"Each made free throw in 3x3 is worth…", ok:"1 point", bad:["2 points","Depends on foul count","0.5 points"]}
  ],
  duration: [
    {q:"Regulation game time in 3x3 is…", ok:"10 minutes", bad:["12 minutes","4×10 minutes","8 minutes"]},
    {q:"Game ends earlier if a team reaches… first", ok:"21 points", bad:["20 points","22 points","19 points"]}
  ],
  start: [
    {q:"How is initial possession decided in 3x3?", ok:"Coin toss; winner chooses offense/defense", bad:["Jump ball","Home team first","Referee choice"]},
    {q:"Play begins with a check-ball at…", ok:"Top of arc", bad:["Free-throw line","Endline corner","Midcourt line"]}
  ],
  clear: [
    {q:"After a defensive rebound or steal, the ball must be cleared…", ok:"Behind the arc", bad:["To midcourt","To the sideline","To the free-throw line"]},
    {q:"A made basket is followed by…", ok:"Immediate possession for defense under the ring (no check-ball)", bad:["Check-ball at top","Throw-in from endline","Jump ball"]}
  ],
  timeouts: [
    {q:"How many team time-outs are granted in 3x3?", ok:"1 per game", bad:["2 per half","3 total","Unlimited"]},
    {q:"Team time-out length in 3x3:", ok:"30 seconds", bad:["60 seconds","45 seconds","20 seconds"]},
    {q:"TV time-outs (where used) are taken at first dead ball after…", ok:"6:59 and 3:59", bad:["7:00 and 4:00","5:00 only","8:00 and 2:00"]},
    {q:"An unused team time-out may be carried into overtime.", ok:"True", bad:["False","Only if leading","Only in finals"]}
  ],
  subs: [
    {q:"Substitutions may occur when…", ok:"Ball is dead before a check-ball or free throw", bad:["Anytime during play","Only between periods","Only after time-outs"]},
    {q:"Substitutes enter from…", ok:"Behind the endline; no referee action needed", bad:["Table side after horn","Sideline only","Coach summons via referee only"]}
  ],
  shotclock: [
    {q:"3x3 shot clock duration is…", ok:"12 seconds", bad:["14 seconds","24 seconds","10 seconds"]},
    {q:"If a fight stops play while a team had control, upon resumption the shot clock…", ok:"Is not reset", bad:["Resets to 12","Resets to 14","Resets to 10"]}
  ],
  penalties: [
    {q:"Team foul penalty begins after…", ok:"6 team fouls", bad:["4","5","7"]},
    {q:"Team fouls 7–9 are penalized with…", ok:"2 free throws", bad:["1 free throw","1+ball","2+ball"]},
    {q:"Team foul 10+ is penalized with…", ok:"2 free throws and possession", bad:["1+ball","2 only","3 free throws"]},
    {q:"A disqualifying foul counts as… for team-foul purposes", ok:"2 fouls", bad:["1 foul","3 fouls","No team foul"]},
    {q:"A contact foul by the team in control (offense) results in…", ok:"Check-ball for defense", bad:["1 FT","2 FTs","Side throw-in at table"]}
  ],
  checkball: [
    {q:"Check-ball is an exchange between opponents located…", ok:"Behind the arc at the top", bad:["At midcourt","At free-throw line","Anywhere outside the paint"]},
    {q:"Distance between players during check-ball should be about…", ok:"1 metre", bad:["2 metres","Half metre","One step behind logo"]},
    {q:"At the start of regulation and overtime, who administers the check-ball?", ok:"Referee", bad:["Any player","Table official","Team captain"]}
  ],
  violations: [
    {q:"Scoring without clearing the ball by the team that just gained control results in…", ok:"Basket cancelled", bad:["Play-on","Technical foul","Jump-ball"]},
    {q:"A shot can only be controlled and released with 0.3s or more; with 0.2/0.1 only a… is valid", ok:"Direct tap", bad:["Dribble pull-up","Pass-and-shoot","Alley-oop catch and shoot"]}
  ],
  goaltend: [
    {q:"Defensive goaltending on a shot from behind the arc awards…", ok:"2 points", bad:["1 point","Free throw only","Ball out of bounds"]},
    {q:"Interference includes touching the basket while the ball is in contact with the ring after a shot.", ok:"True", bad:["False","Only on dunks","Only on offense"]},
    {q:"Goaltending on a last free throw by defense awards 1 point and…", ok:"A technical foul", bad:["Jump-ball","Another free throw only","Reset to 12s"]}
  ],
  admin: [
    {q:"Game lost by forfeit if a team lacks 3 ready players at tip-off time (except grassroots). Score is recorded as…", ok:"w–0 / 0–w", bad:["2–0","21–0","Default loss"]},
    {q:"Game lost by default (team leaves or all injured). Winning team may…", ok:"Keep score or choose forfeit; loser set to 0", bad:["Only keep score","Only win 21–0","Replay match"]},
  ],
};

function asMCQ(item, cat="General"){
  const options = shuffle([item.ok, ...item.bad.slice()]);
  return {
    type:"text",
    cat,
    q:item.q,
    options,
    answer: options.indexOf(item.ok),
    explain:item.explain||""
  }
}

/* ========= Build Question Pool ========= */
const pool = [];

// 1) Text items (expand facts)
Object.entries(FACTS).forEach(([cat, arr])=>{
  arr.forEach(it => pool.push(asMCQ(it, cat)));
});

// 2) Generate many small numeric variations to reach ~200
// Team foul templates
["7–9 → 2 FTs","10+ → 2 FTs + ball"].forEach((s,i)=>{
  pool.push(asMCQ({
    q:`Complete: Team fouls ${s.split(" → ")[0]} are penalized with…`,
    ok:s.split(" → ")[1],
    bad:i?["2 FTs","1 FT","Side ball"] : ["1 FT","1+ball","2+ball"],
  },"Penalties"));
});

// Shot-clock & timing variations
[
  {q:"Shot clock value at start of a new possession in 3x3 is…", ok:"12 seconds", bad:["24 seconds","14 seconds","10 seconds"]},
  {q:"A team time-out can be requested only when…", ok:"Ball is dead before check-ball/FT", bad:["Ball is live","After made basket","Any stoppage including violations"]},
  {q:"Substitutions require prior notice to referees.", ok:"False", bad:["True","Only in last 2:00","Only after FTs"]},
].forEach(it => pool.push(asMCQ(it,"Timing")));

// 3) Image signal questions
const IMG_QUESTIONS = SIGNALS.map(sig=>{
  // Build 3 plausible distractors from other labels
  const wrongs = sample(SIGNALS.filter(x=>x!==sig).map(x=>x.label),3);
  return {
    type:"image",
    cat:"Signals",
    q:"What does this referee signal indicate?",
    img:sig.file,
    options: shuffle([sig.label, ...wrongs]),
    answer:0
  };
});
pool.push(...IMG_QUESTIONS);

// 4) Extra templated items to reach ~200
const EXTRA = [
  ["Where is the check-ball taken?", "Top of the arc", ["Midcourt","Free-throw line","Any sideline"]],
  ["Distance between opponents at check-ball should be about…", "1 metre", ["3 metres","Step-and-a-half","Touching distance"]],
  ["After a made basket the defense must first…", "Collect the ball and clear outside the arc", ["Throw-in from endline","Perform check-ball","Hand to referee"]],
  ["A team reaches penalty after committing…", "6 team fouls (next is penalty)", ["5 team fouls","7 team fouls","Personal fouls by one player"]],
  ["If offense commits a team-control foul…", "Defense gets a check-ball", ["1 FT to defense","Arrow possession","Jump-ball"]],
  ["TV time-outs are at…", "6:59 and 3:59 (first dead ball)", ["7:00 & 4:00","5:59 & 2:59","Every 2:00"]],
  ["A disqualifying foul counts as…", "Two team fouls", ["One team foul","Zero team fouls","Three team fouls"]],
  ["Goaltending by defense on 1-point try awards…", "1 point", ["2 points","Side ball only","1+ball"]],
  ["Interference also includes reaching up through the basket from below.", "True", ["False","Only if contact with net","Only on dunks"]],
  ["A score without prior clear by defense is…", "Cancelled", ["Valid if quick","Technical on offense","Warning only"]],
  ["With 0.2 seconds on clock, a legal score is possible only by…", "Direct tap", ["Catch-and-shoot","Dribble and shoot","Inbound and tip"]],
  ["Substitutes enter…", "Behind the endline while clock is stopped", ["From table on horn","From midcourt logo","After coach signals table"]],
];
EXTRA.forEach(([q,ok,bad])=>pool.push(asMCQ({q,ok,bad},"Rules")));

// Duplicate variations for volume (rotate distractors)
for(let i=0;i<7;i++){
  FACTS.scoring.forEach(x=>pool.push(asMCQ(x,"Scoring")));
  FACTS.timeouts.forEach(x=>pool.push(asMCQ(x,"Time-outs")));
  FACTS.penalties.forEach(x=>pool.push(asMCQ(x,"Penalties")));
  FACTS.checkball.forEach(x=>pool.push(asMCQ(x,"Check-ball")));
  FACTS.violations.forEach(x=>pool.push(asMCQ(x,"Violations")));
  FACTS.goaltend.forEach(x=>pool.push(asMCQ(x,"Goaltending/Interference")));
}
// Ensure at least 200 items
while(pool.length<200){
  pool.push(asMCQ({q:"3x3 free throw value is…", ok:"1 point", bad:["2 points","Depends","0.5 points"]},"Scoring"));
}

/* ========= Runtime state ========= */
const RUN = {
  order: sample(pool, 50),
  answers: Array(50).fill(null),
  i: 0,
};

/* ========= Render ========= */
const $qtext = document.getElementById("qtext");
const $qimg  = document.getElementById("qimg");
const $opts  = document.getElementById("options");
const $next  = document.getElementById("next");
const $skip  = document.getElementById("skip");
const $submit= document.getElementById("submit");
const $qcount= document.getElementById("qcount");
const $cat   = document.getElementById("category");
const $prog  = document.getElementById("progress");

function render(i){
  const q = RUN.order[i];
  $qcount.textContent = `Question ${i+1} / 50`;
  $cat.textContent = q.cat || "General";
  $qtext.textContent = q.q;

  if(q.type==="image"){
    $qimg.src = q.img;
    $qimg.classList.remove("hidden");
    $qimg.alt = "Referee signal image";
  } else {
    $qimg.classList.add("hidden");
  }

  $opts.innerHTML = "";
  q.options.forEach((opt,idx)=>{
    const id = `q${i}_o${idx}`;
    const div = document.createElement("label");
    div.className = "opt";
    div.innerHTML = `<input type="radio" name="q${i}" id="${id}" ${RUN.answers[i]===idx?"checked":""}> <span>${opt}</span>`;
    div.addEventListener("click",()=>{ RUN.answers[i]=idx; updateButtons(); });
    $opts.appendChild(div);
  });
  updateButtons();
  $prog.style.width = `${(i)/50*100}%`;
}
function updateButtons(){
  const last = RUN.i===49;
  $next.classList.toggle("hidden", last);
  $submit.classList.toggle("hidden", !last);
}
$next.addEventListener("click", ()=>{ RUN.i=Math.min(49,RUN.i+1); render(RUN.i); });
$skip.addEventListener("click", ()=>{ RUN.i=Math.min(49,RUN.i+1); render(RUN.i); });
$submit.addEventListener("click", finish);

function finish(){
  const container = document.getElementById("quiz");
  const results = document.getElementById("results");
  let correct = 0;
  const keyEl = document.getElementById("answerKey");
  keyEl.innerHTML = "";

  RUN.order.forEach((q,idx)=>{
    const chosen = RUN.answers[idx];
    const okIdx  = typeof q.answer==="number" ? q.answer : q.options.indexOf(q.answer);
    if(chosen===okIdx) correct++;

    const det = document.createElement("details");
    const okTxt = q.options[okIdx];
    const yourTxt = chosen!=null ? q.options[chosen] : "(no answer)";
    det.innerHTML = `
      <summary><span class="tag">${q.cat||"General"}</span> Q${idx+1}: ${q.q}</summary>
      <div class="ans">
        ${q.type==="image" ? `<div class="ctr"><img class="q-img" style="max-height:220px" alt="" src="${q.img}"></div>`:""}
        <div><b class="good">Correct:</b> ${okTxt}</div>
        <div><b class="${chosen===okIdx?'good':'bad'}">Your answer:</b> ${yourTxt}</div>
        ${q.explain?`<div class="muted">${q.explain}</div>`:""}
      </div>`;
    keyEl.appendChild(det);
  });

  document.getElementById("scoreline").textContent = `Score: ${correct} / 50`;
  container.classList.add("hidden");
  results.classList.remove("hidden");
  document.getElementById("progress").style.width="100%";
}

render(0);
</script>

<!--
Sources (FIBA 3x3 Rules):
:contentReference[oaicite:0]{index=0} Check-ball definition & procedure
:contentReference[oaicite:1]{index=1} Time-out rule, TV time-outs, 30s, carry to OT
:contentReference[oaicite:2]{index=2} Substitution rule & procedure (behind endline)
:contentReference[oaicite:3]{index=3} Game lost by forfeit — notation
:contentReference[oaicite:4]{index=4} Game lost by default — consequence
:contentReference[oaicite:5]{index=5} Team-foul penalty (7–9 two FTs; 10+ two FTs + possession)
:contentReference[oaicite:6]{index=6} Team-control foul => check-ball
:contentReference[oaicite:7]{index=7} Basket cancelled if not cleared; 0.3s control vs 0.2s tap
:contentReference[oaicite:8]{index=8} Goaltending rules
:contentReference[oaicite:9]{index=9} Defensive goaltending penalties
-->

</body>
</html>
