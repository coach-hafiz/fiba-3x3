<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>FIBA 3x3 Rules — Full Quiz</title>
<style>
  :root{
    --bg:#0e1117; --card:#141925; --ink:#e8edf2; --muted:#9aa3ad; --accent:#3874ff; --good:#10b981; --bad:#ef4444;
  }
  body{margin:0;background:#0d1117;color:var(--ink);font:16px/1.5 system-ui}
  .wrap{max-width:1000px;margin:0 auto;padding:24px}
  h1{font-weight:800;font-size:24px;margin-bottom:1rem}
  .card{background:var(--card);border:1px solid rgba(255,255,255,.08);border-radius:12px;overflow:hidden}
  .bar{height:6px;background:#2a2f3a}
  .bar>i{display:block;height:100%;width:0;background:linear-gradient(90deg,#3874ff,#5aa3ff);transition:width .4s}
  .q-body{padding:18px 20px}
  .q-meta{display:flex;justify-content:space-between;font-size:.9rem;color:var(--muted)}
  .q-text{font-size:1.1rem;margin:12px 0}
  .q-img{display:block;max-width:300px;margin:10px 0;border-radius:8px}
  .opts{display:grid;gap:8px}
  .opt{background:#10141d;border:1px solid rgba(255,255,255,.1);padding:10px;border-radius:8px;cursor:pointer}
  .opt.correct{border-color:var(--good);color:var(--good)}
  .opt.incorrect{border-color:var(--bad);color:var(--bad)}
  .footer{display:flex;gap:10px;padding:12px;background:#121722}
  button{border:0;border-radius:8px;padding:9px 14px;font-weight:700;cursor:pointer}
  .ghost{background:#1a2130;color:var(--ink)}
  .next{background:var(--accent);color:#fff}
  .submit{background:#0ea5e9;color:#fff}
  .pill{background:#18202d;border:1px solid #233047;color:#bcd0ea;border-radius:20px;padding:2px 10px;font-size:.8rem}
  .result{padding:20px}
  .score{font-size:1.4rem;font-weight:700;margin-bottom:12px}
  .answer-row{margin:10px 0;padding:12px;background:#0f1420;border:1px solid rgba(255,255,255,.1);border-radius:8px}
  .good{color:var(--good)} .bad{color:var(--bad)}
</style>
</head>
<body>
<div class="wrap">
  <h1>FIBA 3x3 Rules — Interactive MCQ Practice</h1>

  <div class="card" id="quiz">
    <div class="bar"><i id="progress"></i></div>
    <div class="q-body">
      <div class="q-meta"><div id="qcount">Question 1</div><div id="category" class="pill">General</div></div>
      <div id="qtext" class="q-text"></div>
      <img id="qimg" class="q-img hidden" alt=""/>
      <div id="options" class="opts"></div>
      <div id="feedback"></div>
    </div>
    <div class="footer">
      <button id="back" class="ghost">Back</button>
      <button id="next" class="next">Next</button>
      <button id="submit" class="submit hidden">Finish</button>
    </div>
  </div>

  <div id="results" class="card hidden">
    <div class="result">
      <p class="score" id="scoreline"></p>
      <div id="answerKey"></div>
    </div>
  </div>
</div>

<script>
/* ---------- Helpers ---------- */
const shuffle=a=>{for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]]}return a;};

/* ---------- Questions ---------- */
// In practice you’ll expand this to cover every paragraph + all 46 signals.
const textQs = [
  {id:"T1",type:"text",cat:"Playing time",q:"How long is a regulation 3x3 game?",options:["10 minutes","12 minutes","8 minutes","4x10 minutes"],answer:0},
  {id:"T2",type:"text",cat:"Scoring",q:"A basket inside the arc counts for…",options:["1 point","2 points","3 points","Depends"],answer:0},
  {id:"T3",type:"text",cat:"Scoring",q:"A basket from behind the arc counts for…",options:["2 points","1 point","3 points","Depends"],answer:0},
  {id:"T4",type:"text",cat:"Free throw",q:"Each free throw in 3x3 is worth…",options:["1 point","2 points","0 points","Depends"],answer:0},
];
const signals=["1. Stop the clock.jpeg","2. Stop the clock for foul.jpeg"];
const sigQs=signals.map((f,i)=>{const label=f.replace(/^\d+\.\s*/,'').replace(/\.jpeg$/,'');const wrongs=shuffle(signals.map(x=>x.replace(/^\d+\.\s*/,'').replace(/\.jpeg$/,''))).filter(x=>x!==label).slice(0,3);const opts=shuffle([label,...wrongs]);return{id:"S"+i,type:"image",cat:"Referee signals",q:"What does this signal mean?",img:f,options:opts,answer:opts.indexOf(label)};});
let POOL=[...textQs,...sigQs];
POOL=shuffle(POOL); // shuffle order each load

/* ---------- Runtime ---------- */
const TOTAL=POOL.length;
const RUN={order:POOL,answers:Array(TOTAL).fill(null),i:0,score:0};

const $qtext=document.getElementById("qtext");
const $qimg=document.getElementById("qimg");
const $opts=document.getElementById("options");
const $cat=document.getElementById("category");
const $qcount=document.getElementById("qcount");
const $prog=document.getElementById("progress");
const $feedback=document.getElementById("feedback");
const $back=document.getElementById("back");
const $next=document.getElementById("next");
const $submit=document.getElementById("submit");

function render(i){
  const q=RUN.order[i];
  $qcount.textContent=`Question ${i+1} / ${TOTAL}`;
  $cat.textContent=q.cat;
  $qtext.textContent=q.q;
  if(q.type==="image"){$qimg.src=q.img;$qimg.classList.remove("hidden");}else{$qimg.classList.add("hidden");}
  $opts.innerHTML=""; $feedback.innerHTML="";
  q.options.forEach((opt,idx)=>{
    const div=document.createElement("label");div.className="opt";div.innerHTML=`<input type="radio" name="q${i}"> ${opt}`;
    div.addEventListener("click",()=>{
      if(RUN.answers[i]!=null) return; // lock once answered
      RUN.answers[i]=idx;
      if(idx===q.answer){div.classList.add("correct");RUN.score++;}
      else{div.classList.add("incorrect");}
      // mark all options
      [...$opts.children].forEach((c,j)=>{if(j===q.answer)c.classList.add("correct");});
      $feedback.innerHTML=`<p><b>Correct answer:</b> ${q.options[q.answer]}</p>`;
    });
    $opts.appendChild(div);
  });
  $back.disabled=i===0; $next.classList.toggle("hidden",i===TOTAL-1); $submit.classList.toggle("hidden",i!==TOTAL-1);
  $prog.style.width=`${i/TOTAL*100}%`;
}

$next.onclick=()=>{if(RUN.i<TOTAL-1){RUN.i++;render(RUN.i);}};
$back.onclick=()=>{if(RUN.i>0){RUN.i--;render(RUN.i);}};
$submit.onclick=finish;

function finish(){
  document.getElementById("quiz").classList.add("hidden");
  document.getElementById("results").classList.remove("hidden");
  document.getElementById("scoreline").textContent=`Score: ${RUN.score} / ${TOTAL}`;
  const keyEl=document.getElementById("answerKey");keyEl.innerHTML="";
  RUN.order.forEach((q,idx)=>{
    const div=document.createElement("div");div.className="answer-row";
    div.innerHTML=`<div><b>Q${idx+1}:</b> ${q.q}<br>
    <span class="good">Correct:</span> ${q.options[q.answer]}<br>
    <span class="${RUN.answers[idx]===q.answer?'good':'bad'}">Your answer:</span> ${RUN.answers[idx]!=null?q.options[RUN.answers[idx]]:"(no answer)"}</div>`;
    keyEl.appendChild(div);
  });
}
render(0);
</script>
</body>
</html>